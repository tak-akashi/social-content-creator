> **ステータス: 計画段階**
> このドキュメントは `docs/ideas/20260213-social-content-creator.md` から生成されました。
> 実装後は `/update-docs` で実態に同期してください。

# プロダクト要求定義書 (Product Requirements Document)

## プロダクト概要

### 名称
**Social Content Creator** - AIエンジニアのための情報発信自動化ツール

### プロダクトコンセプト
- **情報資産の活用**: Notionに蓄積したAI論文要約・ニュース・記事を効率的にコンテンツ化する
- **最小労力での継続発信**: Claude Codeスキルによる対話的な記事作成で、週2〜3回のコンスタントな発信を実現する
- **2層アーキテクチャ**: スキル層（Claude Code）とツール層（Python）の分離による柔軟な拡張性
- **段階的な成長**: ブログ記事（Phase 1）→ X投稿（Phase 2）→ Notion連携（Phase 3）の段階的拡張

### プロダクトビジョン
フリーランスAIエンジニアが、日常的に蓄積する技術情報を最小限の手間で質の高いコンテンツに変換し、継続的に発信できる環境を実現する。Claude Codeとの対話を通じて、テーマ選定から記事作成・投稿までをシームレスに行い、AIエンジニアとしてのブランド構築とビジネス機会の創出を支援する。

### 目的
- 最小限の手間でコンスタントに質の高い記事を発信できる状態にする（週2〜3回）
- 蓄積した情報資産（Notion DB）を効率的にコンテンツ化するパイプラインを構築する
- 「Aidotters」としてのAIエンジニアブランド発信基盤を確立する

## ターゲットユーザー

### プライマリーペルソナ: Tak（30代、フリーランスAIエンジニア）

**基本属性**:
- フリーランスAIエンジニアとして複数プロジェクトを並行
- 「Aidotters」名義での情報発信を開始したい
- ターミナル + Claude Code を日常的に使用

**技術スタック**:
- Python、Claude Code、Git/GitHub を日常的に利用
- Notion をナレッジベースとして活用
- WordPress でブログサイトを構築予定

**現在の課題**:
- 情報発信の重要性を認識しているが、記事作成の時間を捻出できない
- Notionに蓄積した情報資産（AI論文要約、ニュース、Medium記事）が発信に活かせていない
- ブランド発信基盤がまだ整っていない

**期待する解決策**:
- コマンド一つで記事のドラフトが生成される
- 蓄積データを自動的にコンテンツのソースとして活用できる
- 対話的に記事を推敲・修正し、そのまま投稿できる

**1日の典型的なワークフロー**:
1. 朝: Notionで気になるニュース・論文をクリップ
2. 日中: クライアントワーク（AI開発）
3. 夕方〜夜: Claude Codeで `/create-blog-post` を実行し、その週のネタで記事を作成
4. レビュー・修正後、WordPress に投稿

## 成功指標（KPIs）

### プライマリーKPI

| 指標 | 目標 | 測定方法 |
|------|------|----------|
| 週あたりの記事投稿数 | 2〜3回 | WordPress投稿ログ |
| 記事作成にかかる時間 | 30分以内/記事 | 手動計測 |
| 月間PV | 1,000PV（3ヶ月後） | WordPress Analytics |

### セカンダリーKPI

| 指標 | 目標 | 測定方法 |
|------|------|----------|
| コンテンツタイプのカバー率 | 3種類以上/月 | 投稿カテゴリ分析 |
| 記事品質の自己評価 | 4/5以上 | セルフレビュー |
| Notion蓄積データの活用率 | 50%以上 | Notionタグ管理 |

## 機能要件

### P0（必須）: コア機能

#### 機能1: ブログ記事生成スキル

**ユーザーストーリー**:
AIエンジニアとして、テーマやキーワードを指定するだけで記事ドラフトを生成するために、Claude Codeスキルとしての記事生成コマンドが欲しい

**受け入れ条件**:
- [ ] `/create-blog-post --type <type>` でコンテンツタイプを指定して記事を生成できる
- [ ] `--topic` オプションでキーワード・トピックを指定できる
- [ ] `--url` オプションで参照URLを指定できる
- [ ] `--repo` オプションでGitHubリポジトリを指定できる
- [ ] 記事タイプに応じたテンプレートが適用される
- [ ] 指定した文体ガイド（です・ます調、丁寧かつ親しみやすい）に沿った記事が生成される
- [ ] 生成した記事を対話的に確認・編集できる

**検証方法**:

| 検証項目 | テストデータ | 合格基準 |
|---------|------------|---------|
| タイプ指定生成 | `--type weekly-ai-news` | 週刊AIニュース形式の記事が生成される |
| トピック指定生成 | `--topic "LangChainの最新アップデート"` | 指定トピックに沿った記事が生成される |
| URL指定生成 | `--type paper-review --url https://arxiv.org/abs/xxxx` | URL内容を参照した論文レビュー記事が生成される |
| 文体の一貫性 | 任意の記事生成 | です・ます調で統一されている |

**優先度**: P0（必須）

#### 機能2: コンテンツタイプ別テンプレート

**ユーザーストーリー**:
AIエンジニアとして、記事タイプごとに最適な構成で記事を作成するために、コンテンツタイプ別のテンプレートシステムが欲しい

**受け入れ条件**:
- [ ] 以下のコンテンツタイプに対応するテンプレートが存在する:
  - 週刊AIニュースハイライト（3,000〜5,000字）
  - 論文解説（5,000〜8,000字）
  - GitHubプロジェクト紹介（3,000〜5,000字）
  - ツール・Tips紹介（3,000〜5,000字）
  - AI×株式投資・企業分析（3,000〜8,000字）
  - AI×データ分析・ML開発（3,000〜8,000字）
  - 画像認識・コンピュータビジョン（3,000〜8,000字）
  - 特集記事（15,000〜20,000字）
- [ ] テンプレートは見出し構成、文字数目安、セクション構成を定義している
- [ ] テンプレートの追加・修正が容易にできる

**優先度**: P0（必須）

#### 機能3: WordPress投稿

**ユーザーストーリー**:
AIエンジニアとして、生成した記事をそのままブログに投稿するために、WordPress REST API経由での投稿機能が欲しい

**受け入れ条件**:
- [ ] WordPress REST API経由で記事を投稿できる
- [ ] 下書き投稿と公開投稿を選択できる
- [ ] カテゴリ・タグを設定できる
- [ ] 投稿結果（URL等）が表示される
- [ ] Application Passwords による認証が機能する

**検証方法**:

| 検証項目 | テストデータ | 合格基準 |
|---------|------------|---------|
| 下書き投稿 | テスト記事 | WordPress管理画面で下書き記事として確認できる |
| 公開投稿 | テスト記事 | 公開URLでアクセスできる |
| カテゴリ設定 | 「AI」カテゴリ指定 | 正しいカテゴリに分類される |
| タグ設定 | 「Python」「Claude」タグ指定 | 正しいタグが付与される |

**優先度**: P0（必須）

#### 機能4: Notion DB連携（Google Alertニュース）

**ユーザーストーリー**:
AIエンジニアとして、Notionに蓄積したGoogle Alertのニュース記事を記事のソースとして活用するために、過去1週間の記事を取得できる仕組みが欲しい

**受け入れ条件**:
- [ ] Notion MCP経由でGoogle Alert記事保存データベースに接続できる
- [ ] 過去1週間の記事一覧を取得できる
- [ ] 取得結果をClaude Codeスキルから利用できる（記事生成のソースとして渡せる）
- [ ] 記事のタイトル・URL・保存日時・要約が取得できる

**検証方法**:

| 検証項目 | テストデータ | 合格基準 |
|---------|------------|---------|
| 過去1週間の取得 | 直近7日間のデータ | 期間内の全記事が返される |
| データ構造 | 取得結果 | タイトル・URL・日時・要約が含まれる |
| スキル連携 | `/create-blog-post --type weekly-ai-news` | 取得データが記事生成のインプットとして使われる |

**優先度**: P0（必須）

#### 機能5: Notion DB連携（Arxiv論文）

**ユーザーストーリー**:
AIエンジニアとして、Notionに蓄積したArxiv論文データを記事のソースとして活用するために、テーマ指定や期間指定で論文リストを取得できる仕組みが欲しい

**受け入れ条件**:
- [ ] Notion MCP経由でArxiv論文データベースに接続できる
- [ ] 過去1週間の論文リストを取得できる
- [ ] 特定テーマ（キーワード）で論文をフィルタリングできる
- [ ] 取得結果をClaude Codeスキルから利用できる（論文レビュー記事のソースとして渡せる）
- [ ] 論文のタイトル・URL・著者・要約・カテゴリが取得できる

**検証方法**:

| 検証項目 | テストデータ | 合格基準 |
|---------|------------|---------|
| 過去1週間の取得 | 直近7日間のデータ | 期間内の全論文が返される |
| テーマ指定 | `--topic "LLM"` | キーワードに合致する論文のみ返される |
| スキル連携 | `/create-blog-post --type paper-review` | 取得データが記事生成のインプットとして使われる |

**優先度**: P0（必須）

### P1（重要）: 情報収集機能

#### 機能6: 情報収集ツール群

**ユーザーストーリー**:
AIエンジニアとして、記事作成に必要な情報を効率的に収集するために、複数の情報源からデータを取得する仕組みが欲しい

**受け入れ条件**:
- [ ] Web検索で最新情報を取得できる
- [ ] 指定URLの内容を取得・要約できる
- [ ] Gemini CLIを活用した調査レポートを生成できる
- [ ] GitHub APIで自身のリポジトリ情報を取得できる

**優先度**: P1（重要）

#### 機能7: stock-analysisプロジェクト連携

**ユーザーストーリー**:
AIエンジニアとして、自身の株式分析プロジェクトを記事の題材として活用するために、stock-analysisプロジェクトのコード・分析結果を参照できる仕組みが欲しい

**受け入れ条件**:
- [ ] stock-analysisプロジェクトのコードを記事素材として参照できる
- [ ] 分析結果やチャート画像を記事に含めることができる
- [ ] 「AIでこう作った」というストーリーテリングの文脈で活用できる

**優先度**: P1（重要）

### P2（できれば）: 将来機能

#### 機能8: X（Twitter）投稿

記事のサマリーをX投稿として作成・投稿する機能。テキスト・画像・動画付き投稿に対応。

**優先度**: P2（Phase 2）

#### 機能9: Notion DB連携パイプライン（自動ネタ収集）

P0のNotion DB連携（機能4・5）を発展させ、未使用のネタ候補を自動的にリスト化し、記事作成をレコメンドするパイプライン。Medium記事DBとの連携も含む。

**優先度**: P2（Phase 3）

### CLIインターフェース

```bash
# 基本操作
/create-blog-post --type weekly-ai-news
/create-blog-post --type paper-review --url https://arxiv.org/abs/xxxx
/create-blog-post --type paper-review --topic "LLM"
/create-blog-post --type project-intro --repo tak/my-project
/create-blog-post --type tool-tips --topic "Difyの使い方"
/create-blog-post --type market-analysis --topic "ミネルヴィニ手法による銘柄スクリーニング"
/create-blog-post --type ml-practice --topic "Claude Codeで特徴量エンジニアリングを効率化する"
/create-blog-post --type cv --topic "YOLOv8で物体検出を試してみた"
/create-blog-post --topic "LangChainの最新アップデート"

# Notion DB連携（記事ソースの取得）
/fetch-notion-news                          # Google Alert過去1週間のニュース取得
/fetch-notion-papers                        # Arxiv論文 過去1週間のリスト取得
/fetch-notion-papers --topic "LLM"          # Arxiv論文 テーマ指定で取得
```

## 非機能要件

### パフォーマンス

| 処理 | 目標 | 測定条件 |
|------|------|----------|
| 記事ドラフト生成 | 3分以内 | 3,000〜5,000字の標準記事 |
| WordPress投稿 | 10秒以内 | 1記事の投稿処理 |
| URL取得・要約 | 30秒以内 | 1URL |
| Web検索結果取得 | 30秒以内 | 1クエリ |
| Notion DBニュース取得 | 15秒以内 | 過去1週間分 |
| Notion DB論文取得 | 15秒以内 | 過去1週間分またはテーマ指定 |

### ユーザビリティ
- Claude Codeスキルとして自然な対話フローで操作できる
- エラー時に具体的な対処方法が表示される
- 記事の修正・推敲が対話的に行える

### 信頼性
- 生成した記事はローカルファイル（`docs/posts/`）に自動保存される
- WordPress投稿失敗時にローカルのドラフトが失われない
- API通信エラー時のリトライ処理

### セキュリティ
- WordPress API認証情報は環境変数（`.env`）で管理する
- API キーやパスワードをコードにハードコードしない
- `.env` ファイルは `.gitignore` で除外する

## 技術スタック

| 項目 | 技術 | 選定理由 |
|------|------|----------|
| 言語 | Python 3.12+ | AI/ML エコシステムとの親和性、日常的に使用 |
| パッケージ管理 | uv | 高速な依存関係解決 |
| HTTP通信 | httpx | async対応、モダンなHTTPクライアント |
| スキル層 | Claude Code Skills | 対話的な操作、柔軟な拡張性 |
| ブログ投稿 | WordPress REST API | お名前.comサーバーで構築予定 |
| 情報収集 | Gemini CLI / Web検索 / Notion MCP | 柔軟な情報源 |
| テスト | pytest | Python標準テストフレームワーク |
| Lint/Format | Ruff / Black | 高速なLint・フォーマット |
| 型チェック | mypy | 静的型チェック |

## スコープ外

明示的にスコープ外とする項目:
- note への投稿（WordPressの内容を手動で対応）
- Webアプリケーション化
- 複数ユーザー対応
- 画像・動画の自動生成（Phase 2以降で検討）
- RSSフィードからの自動ネタ収集
- 投稿スケジューリング機能
- アナリティクス連携（PV、エンゲージメント追跡）

## リスクと対策

| リスク | 影響度 | 発生可能性 | 対策 |
|--------|--------|-----------|------|
| WordPress APIの認証・権限設定 | 中 | 中 | Application Passwordsプラグイン等で対応 |
| 生成記事の品質のばらつき | 中 | 高 | テンプレートとスタイルガイドで品質を担保 |
| API制限（各プラットフォーム） | 低 | 低 | 投稿頻度が週2-3回のため影響小 |
| Notion APIのレート制限 | 低 | 低 | キャッシュ・バッチ取得で対応 |
| WordPressサイト未構築 | 高 | 中 | Phase 1の初期タスクとしてサイト構築を含める |
| Claude Code スキルの仕様変更 | 中 | 低 | スキル層とツール層を分離し影響を最小化 |

## 開発フェーズ

### Phase 1: ブログ記事生成・投稿（今回のスコープ）

**目標**: Claude Codeスキルからブログ記事を生成し、WordPressに投稿できる

**実装内容**:
- Claude Codeスキル `/create-blog-post` の実装
- コンテンツタイプ別テンプレートの作成
- Notion DB連携（Google Alertニュース取得、Arxiv論文取得）
- 情報収集ツール群（Web検索、URL取得、Gemini CLI連携）
- WordPress REST API投稿機能
- 記事のローカル保存機能

**成功基準**:
- [ ] `/create-blog-post --type weekly-ai-news` で記事が生成される
- [ ] Notion DBからGoogle Alertニュース（過去1週間）を取得し、記事ソースとして活用できる
- [ ] Notion DBからArxiv論文（テーマ指定/過去1週間）を取得し、記事ソースとして活用できる
- [ ] 生成された記事がWordPressに投稿される
- [ ] 週2〜3回の記事投稿が30分以内で完了する
- [ ] 単体テスト・WordPress APIモックテストが存在する

### Phase 2: X投稿（将来）

**目標**: 記事のサマリーをXに投稿できる

**実装内容**:
- X API（Twitter API v2）連携
- テキスト・画像・動画付き投稿
- Aidottersアカウントでの発信

**成功基準**:
- [ ] 記事からX投稿用サマリーが生成される
- [ ] X APIでテキスト投稿ができる
- [ ] 画像付き投稿ができる

### Phase 3: Notion DB連携拡張（将来）

**目標**: Phase 1のNotion DB連携を発展させ、自動ネタ収集・レコメンドパイプラインを構築する

**実装内容**:
- Medium記事DBとの連携追加
- 未使用ネタの自動候補リスト生成・レコメンド
- 使用済みネタのステータス自動更新

**成功基準**:
- [ ] Medium記事DBからもネタ候補が収集される
- [ ] 未使用のネタ候補が自動的にリスト化される
- [ ] 使用済みネタのステータスが更新される

## APIインターフェース（想定）

### Pythonコード例

```python
from social_content_creator.generators.blog_post import BlogPostGenerator
from social_content_creator.publishers.wordpress import WordPressPublisher
from social_content_creator.collectors.web_search import WebSearchCollector

# 記事生成
generator = BlogPostGenerator(content_type="weekly-ai-news")
draft = await generator.generate(topic="2026年2月のAIニュース")

# レビュー・編集
print(draft.content)
draft.content = edited_content  # 対話的に編集

# WordPress投稿
publisher = WordPressPublisher()
result = await publisher.publish(
    draft,
    status="draft",  # "draft" or "publish"
    categories=["AI", "ニュース"],
    tags=["AI", "週刊まとめ"],
)
print(f"投稿URL: {result.url}")
```

### REST API例（WordPress投稿）

| メソッド | エンドポイント | 用途 |
|---------|-------------|------|
| POST | `/wp-json/wp/v2/posts` | 記事投稿 |
| GET | `/wp-json/wp/v2/categories` | カテゴリ一覧取得 |
| GET | `/wp-json/wp/v2/tags` | タグ一覧取得 |
| POST | `/wp-json/wp/v2/media` | メディアアップロード |
